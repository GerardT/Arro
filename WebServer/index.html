<!DOCTYPE html>
 <meta charset="UTF-8"> 
<html lang="en">
  <head>
    <script src="https://polygit.org/components/webcomponentsjs/webcomponents-loader.js"></script>

    <link rel="import" href="bower_components/paper-button/paper-button.html">
    <link rel="import" href="bower_components/paper-checkbox/paper-checkbox.html">
    <link rel="import" href="bower_components/paper-slider/paper-slider.html">
    <link rel="import" href="bower_components/paper-progress/paper-progress.html">


    <style>
    paper-button.fancy {
      background: green;
      color: yellow;
    }

    paper-button.fancy:hover {
      background: lime;
    }

    paper-button[disabled],
    paper-button[toggles][active] {
      background: red;
    }
    </style>


  </head>
  <body>
    <paper-button>
      <iron-icon icon="favorite"></iron-icon>
      custom button content
    </paper-button>
    <paper-checkbox checked> On </paper-checkbox>
    <paper-checkbox> Off </paper-checkbox>
    <paper-slider> </paper-slider>
    <paper-slider> </paper-slider>
    <paper-progress id=".main.aUiUserDisplay" value="50" class="slow red"> </paper-progress>
    <paper-slider id="abc" min="0" max="100" value="{{sliderValue}}" on-change="{{sliderChange}}"></paper-slider>

    <div id="greeting"></div>


    <script type="text/javascript">
    // use vanilla JS because why not
    var mySocket = 0; 
    var greeting = document.getElementById("greeting");
    window.addEventListener("load", function() {
        
        // create websocket instance
        //var mySocket = new WebSocket("ws://localhost:8080/ws");
        mySocket = new WebSocket("ws://" + location.host + "/ws");
        
        // Display output
        // add event listener reacting when message is received
        mySocket.onmessage = function (event) {
            json = JSON.parse(event.data);
            address = json.address;
            var output = document.getElementById("output");
            var web_component = document.getElementById(address);
            // put text into our output div
            // output.textContent = event.data;
            web_component.value = json.data.value;
        };


    });

      document.addEventListener('WebComponentsReady', function() {
        abc = document.getElementById("abc");
        abc.addEventListener('value-change', function() {
            object = {
              "address": ".main.aUiUserInput", 
              "data": {
                         value: abc.value
                      }
            };
            mySocket.send(JSON.stringify(object) + "\n");
        });

        var button = document.querySelector('paper-button');
        button.addEventListener('click', function() {
          greeting.textContent = 'Hello, ' + input.value;
        });
      });
    </script>


    <div id="output"></div>
    </body>
</html>

